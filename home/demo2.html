<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>APEX - Its Time To Lock In</title>

  <style>
    :root {
      --dash-length: 46px;
      --dash-thickness: 3px;
      --dash-gap: 18px;
      --dash-color: rgb(255, 255, 255);
      --color-bg-main: radial-gradient(ellipse at center, #1ec5e6 0%, #0860b8 100%);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
      background: var(--color-bg-main);
      overflow-x: hidden;
      position: relative;
      min-height: 300vh;
    }

    /* ===== DESKTOP CONTAINER ===== */
    .container {
      width: 100%;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: sticky;
      top: 0;
    }

    .top-nav {
      position: absolute;
      top: 40px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      padding: 0 50px;
      z-index: 10;
    }
    .nav-item {
      color: rgba(255, 255, 255, 0.6);
      font-size: 16px;
      font-weight: 400;
      letter-spacing: 0.3px;
    }
    .nav-left {
      display: flex;
      gap: 60px;
    }

    .center-top {
      position: absolute;
      top: 40px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 10;
    }

    .benefits {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 10px;
      color: rgba(255, 255, 255, 0.7);
      font-size: 14px;
      font-weight: 500;
    }
    .benefits::before {
      content: '';
      width: 14px;
      height: 14px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 2px;
      display: inline-block;
    }

    .main-title {
      font-size: 56px;
      font-weight: 700;
      color: white;
      letter-spacing: -0.5px;
      line-height: 1.1;
    }

    .circle-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 450px;
      height: 450px;
      z-index: 1;
    }

    .circle-ticks {
      position: relative;
      width: 100%;
      height: 100%;
      animation: circleRotate 8s ease-in-out infinite;
    }

    .tick {
      position: absolute;
      width: 2px;
      height: 20px;
      background: rgb(255, 255, 255);
      top: 0;
      left: 50%;
      transform-origin: 50% 225px;
      animation: tickRotate 3s ease-in-out infinite;
      opacity: 0.5;
    }

    .ticks-wrap {
      position: absolute;
      height: 80vh;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 0;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
    }
    .ticks-wrap.left-side { left: -400px; }
    .ticks-wrap.right-side { right: -400px; }

    .ticks {
      position: relative;
      width: var(--dash-length);
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      gap: var(--dash-gap);
      padding-top: calc(var(--dash-gap) / 2);
      box-sizing: border-box;
    }

    .dash-tick {
      width: var(--dash-length);
      height: var(--dash-thickness);
      background: var(--dash-color);
      border-radius: 2px;
      position: relative;
      transform-origin: left center;
      opacity: 0.5;
    }

    .product-container {
      position: relative;
      z-index: 5;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 0px;
      width: 100%;
      padding: 0 20px;
    }
    .product-images {
      position: relative;
      width: 300px;
      max-width: 90vw;
      height: auto;
      display: flex;
      align-items: center;
    }

    .product-box {
      width: 100%;
      height: auto;
      position: relative;
      z-index: 3;
      filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.3));
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .product-box img {
      width: 100%;
      height: auto;
      display: block;
      object-fit: contain;
      transition: transform 0.5s cubic-bezier(.7,.3,0,1), opacity 0.5s;
    }

    .background-img {
      position: absolute;
      left: 35%;
      top: 10%;
      width: 220px;
      height: 220px;
      z-index: 1;
      transform: translate(0%, -46%) scale(0.9);
      transform: rotate(15deg);
      opacity: 0;
      filter: blur(0.5px) contrast(110%);
      pointer-events: none;
      transition: opacity 0.55s cubic-bezier(.7,.3,0,1),
                  transform 0.6s cubic-bezier(.8,.4,.3,.94),
                  filter 0.45s;
    }
    .background-img img {
      width: 60%;
    }

    .benefit-label {
      position: absolute;
      z-index: 20;
      padding: 7px 22px;
      color: #fff;
      border: 1.5px solid rgba(255,255,255,0.75);
      border-radius: 22px;
      background: rgba(19,154,233, 0.13);
      font-size: 18px;
      opacity: 0;
      pointer-events: none;
      font-weight: 400;
      transition: opacity 0.5s;
    }
    .label-speed         { top: 23%; left: 25%; }
    .label-endurance     { top: 23%; right: 25%; }
    .label-reaction      { top: 46%; left: 19%; }
    .label-emotion       { top: 40%; right: 19%; }
    .label-vigilance     { top: 70%; left: 25%; }
    .label-energy        { top: 57%; right: 22%; }
    .label-concentration { top: 73%; right: 25%; }

    .side-counter {
      position: absolute;
      color: white;
      font-family: 'Poppins', sans-serif;
      text-align: left;
      opacity: 0;
    }

    .side-counter .counter-title {
      font-size: 16px;
      font-weight: 300;
      opacity: 0.8;
      letter-spacing: 0.5px;
    }

    .side-counter .counter-value {
      font-size: 26px;
      font-weight: 600;
      margin-top: 5px;
    }

    .left-counter {
      left: 10%;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
    }

    .right-counter {
      right: 10%;
      top: 50%;
      transform: translateY(-50%);
      text-align: right;
      display: flex;
      flex-direction: column;
    }

    /* ===== MOBILE-ONLY SECTION ===== */
    .mobile-only-section {
      display: none;
    }

    @media (max-width: 768px) {
      html, body {
        height: 100%;
        overflow: hidden;
      }

      .container {
        display: none !important;
      }

      .mobile-only-section {
        display: flex !important;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        min-height: 100vh;
        width: 100%;
        background: var(--color-bg-main);
        padding: 24px 16px 32px;
        box-sizing: border-box;
      }

      .mobile-center-top {
        text-align: center;
        margin-top: 8px;
        margin-bottom: 24px;
        color: #fff;
      }

      .mobile-center-top .benefits {
        justify-content: center;
        font-size: 12px;
        margin-bottom: 6px;
      }

      .mobile-center-top .benefits::before {
        width: 10px;
        height: 10px;
      }

      .mobile-center-top .main-title {
        font-size: 24px;
      }

      .mobile-circle-container {
        position: relative;
        width: min(80vw, 340px);
        /* no aspect-ratio circle background now, just wrapper for image */
        margin-bottom: 24px;
      }

      /* hide tick circle in mobile */
      .mobile-circle-ticks {
        display: none;
      }

      .mobile-image-center {
        width: 100%;
        max-width: 260px;
        margin: 0 auto;
        border-radius: 16px;
        overflow: hidden;
        /* box-shadow: 0 18px 36px rgba(0,0,0,0.35); */
        background: transparent;
      }

      .mobile-image-center img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        object-position: center;
      }

      .mobile-counters {
        display: flex;
        gap: 32px;
        margin-top: 16px;
      }

      .mobile-counter {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: #fff;
        font-family: 'Poppins', sans-serif;
      }

      .mobile-counter .counter-title {
        font-size: 13px;
        opacity: 0.8;
        margin-bottom: 3px;
      }

      .mobile-counter .counter-value {
        font-size: 30px;
        font-weight: 700;
        line-height: 1;
      }

      .mobile-counter .unit {
        font-size: 14px;
        opacity: 0.8;
      }
    }

    @media (max-width: 480px) {
      .mobile-center-top .main-title {
        font-size: 22px;
      }
      .mobile-image-center {
        max-width: 230px;
      }
    }

    @media (max-width: 360px) {
      .mobile-center-top .main-title {
        font-size: 20px;
      }
      .mobile-image-center {
        max-width: 210px;
      }
    }
  </style>
</head>

<body>
  <!-- DESKTOP / TABLET CONTAINER -->
  <div class="container">
    <div class="top-nav">
      <div class="nav-left">
        <div class="nav-item">Performance</div>
        <div class="nav-item">Caffeine</div>
      </div>
      <div class="nav-item">Precision</div>
    </div>

    <div class="center-top">
      <div class="benefits">Benefits</div>
      <h1 class="main-title">Its Time To Lock In</h1>
    </div>

    <div class="circle-container">
      <div class="circle-ticks" id="circleTicks"></div>

      <div class="ticks-wrap left-side">
        <div class="ticks" id="rightTicks"></div>
      </div>
      <div class="ticks-wrap right-side">
        <div class="ticks" id="leftTicks"></div>
      </div>
    </div>

    <div class="product-container">
      <div class="product-images">
        <div class="background-img" id="backgroundPop">
          <img src="/assests/czx 2.png" />
        </div>
        <div class="product-box">
          <img id="productImg" src="/assests/Apex 8  SLIM rever 1.png" alt="Apex Product" />
        </div>
      </div>

      <div class="side-counter left-counter" style="display:flex; flex-direction:column; align-items:center; color:white;">
        <span class="counter-title" style="margin-bottom:4px;">Energy</span>
        <div class="counter-row" style="display:flex; align-items:baseline; gap:4px;">
          <span class="counter-value" id="leftCounter" style="font-size:32px; font-weight:700;">0</span>
          <span class="unit" style="font-size:18px; opacity:0.8;">mg</span>
        </div>
      </div>

      <div class="side-counter right-counter" style="display:flex; flex-direction:column; align-items:center; color:white;">
        <span class="counter-title" style="margin-bottom:4px;">Caffeine</span>
        <div class="counter-row" style="display:flex; align-items:baseline; gap:4px;">
          <span class="counter-value" id="rightCounter" style="font-size:32px; font-weight:700;">0</span>
          <span class="unit" style="font-size:18px; opacity:0.8;">mg</span>
        </div>
      </div>
    </div>

    <div class="benefit-label label-vigilance">Vigilance</div>
    <div class="benefit-label label-reaction">Reaction Time</div>
    <div class="benefit-label label-speed">Speed</div>
    <div class="benefit-label label-endurance">Endurance</div>
    <div class="benefit-label label-emotion">Emotional Status</div>
    <div class="benefit-label label-energy">Energy</div>
    <div class="benefit-label label-concentration">Concentration</div>
  </div>

  <!-- MOBILE-ONLY SECTION -->
  <div class="mobile-only-section">
    <div class="mobile-center-top">
      <div class="benefits">Benefits</div>
      <h1 class="main-title">Its Time To Lock In</h1>
    </div>

    <div class="mobile-circle-container">
      <!-- Tick circle hidden via CSS; just using wrapper -->
      <div class="circle-ticks mobile-circle-ticks" id="mobileCircleTicks"></div>
      <div class="mobile-image-center">
        <img src="/assests/czx 2.png" alt="Product" />
      </div>
    </div>

    <div class="mobile-counters">
      <div class="mobile-counter">
        <span class="counter-title">Energy</span>
        <span class="counter-value" id="mobileLeftCounter">0</span>
        <span class="unit">mg</span>
      </div>
      <div class="mobile-counter">
        <span class="counter-title">Caffeine</span>
        <span class="counter-value" id="mobileRightCounter">0</span>
        <span class="unit">mg</span>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <script>
    const isMobile = window.matchMedia("(max-width: 768px)").matches;
    gsap.registerPlugin(ScrollTrigger);

    // ===== DESKTOP circle ticks (#circleTicks) =====
    const circleTicks = document.getElementById('circleTicks');
    if (circleTicks) {
      const tickCount = 72;
      for (let i = 0; i < tickCount; i++) {
        const tick = document.createElement('div');
        tick.className = 'tick';
        const angle = (360 / tickCount) * i;
        tick.style.transform = `rotate(${angle}deg)`;
        circleTicks.appendChild(tick);
      }
    }

    if (isMobile) {
      // ===== MOBILE COUNTER ANIMATION ONLY =====
      const mobileTotalLeft = 100;
      const mobileTotalRight = 199;
      const mobileDuration = 2.3;

      const mobileTl = gsap.timeline();

      mobileTl.to("#mobileLeftCounter", {
        innerText: mobileTotalLeft,
        duration: mobileDuration,
        ease: "power1.out",
        snap: { innerText: 1 }
      }, 0);

      mobileTl.to("#mobileRightCounter", {
        innerText: mobileTotalRight,
        duration: mobileDuration,
        ease: "power1.out",
        snap: { innerText: 1 }
      }, 0);

    } else {
      // ===== DESKTOP GSAP ANIMATIONS =====

      function populateCurvedTicks(container, count, options = {}) {
        const length = options.length ?? 46;
        const thickness = options.thickness ?? 3;
        const gap = options.gap ?? 18;
        const curveStrength = options.curveStrength ?? 40;
        const rotateAmount = options.rotate ?? 8;
        const direction = options.direction ?? 1;

        container.style.setProperty('--dash-length', length + 'px');
        container.style.setProperty('--dash-thickness', thickness + 'px');
        container.style.setProperty('--dash-gap', gap + 'px');

        container.innerHTML = '';

        for (let i = 0; i < count; i++) {
          const dash = document.createElement("div");
          dash.className = "dash-tick";

          const progress = i / (count - 1);
          const curve = Math.sin(progress * Math.PI);
          const xOffset = curve * curveStrength * direction;

          dash.style.transform =
            `translateX(${xOffset}px) rotate(${curve * rotateAmount * direction}deg)`;

          container.appendChild(dash);
        }
      }

      populateCurvedTicks(
        document.getElementById("leftTicks"),
        20,
        { length: 48, thickness: 2, gap: 25, curveStrength: 40, rotate: 8, direction: 1 }
      );
      populateCurvedTicks(
        document.getElementById("rightTicks"),
        20,
        { length: 48, thickness: 2, gap: 25, curveStrength: 40, rotate: 8, direction: -1 }
      );

      // Product image animation
      gsap.to("#productImg", {
        scrollTrigger: {
          trigger: ".product-container",
          start: "top+=100% center",
          end: "bottom top",
          scrub: true,
        },
        scale: 0.8,
        opacity: 1,
        transformOrigin: "center center",
        ease: "power2.out",
      });

      // Background image morph
      gsap.fromTo(
        "#backgroundPop",
        {
          scale: 0.7,
          opacity: 1,
          filter: "blur(12px) contrast(100%)",
          borderRadius: "60%",
        },
        {
          scrollTrigger: {
            trigger: ".product-container",
            start: "top+=100% center",
            end: "bottom top",
            scrub: true,
          },
          scale: 1.25,
          opacity: 1,
          filter: "blur(0px) contrast(140%)",
          borderRadius: "16px",
          ease: "power1.inOut",
        }
      );

      // Labels appearing
      const labelTl = gsap.timeline({
        scrollTrigger: {
          trigger: ".product-container",
          start: "top+=100% center",
          end: "top+=200% top",
          scrub: true
        }
      });

      labelTl.to(".benefit-label", {
        opacity: 1,
        duration: 1,
        ease: "none"
      });

      // Hide labels
      gsap.to(".benefit-label", {
        scrollTrigger: {
          trigger: ".product-container",
          start: "top+=300% center",
          end: "top+=400% center",
          scrub: true
        },
        opacity: 0,
        duration: 1
      });

      // Hide product image
      gsap.fromTo("#productImg",
        { opacity: 1 },
        {
          scrollTrigger: {
            trigger: ".product-container",
            start: "top+=300% center",
            end: "bottom top",
            scrub: true,
          },
          opacity: 0,
        }
      );

      // Background image straighten and increase size
      gsap.fromTo(".background-img",
        { scale: 1.25, rotation: 15 },
        {
          scrollTrigger: {
            trigger: ".product-container",
            start: "top+=300% center",
            end: "bottom top",
            scrub: true,
          },
          scale: 1.5,
          rotation: 0,
        }
      );

      // Side counters appear
      gsap.to(".side-counter", {
        scrollTrigger: {
          trigger: ".product-container",
          start: "top+=300% center",
          end: "top+=400% top",
          scrub: true
        },
        opacity: 1
      });

      // Counters and ticks animation
      const totalLeft = 100;
      const totalRight = 199;
      const tickDuration = 2.3;
      const tl = gsap.timeline({ paused: true });

      tl.to("#leftCounter", {
        innerText: totalLeft,
        duration: tickDuration,
        ease: "power1.out",
        snap: { innerText: 1 }
      }, 0);

      tl.to("#rightCounter", {
        innerText: totalRight,
        duration: tickDuration,
        ease: "power1.out",
        snap: { innerText: 1 }
      }, 0);

      const ticksArr = gsap.utils.toArray(".dash-tick");
      const fromBottom = ticksArr.slice().reverse();

      tl.to(fromBottom, {
        opacity: 1,
        duration: tickDuration,
        ease: "none",
        stagger: tickDuration / fromBottom.length,
      }, 0);

      ScrollTrigger.create({
        trigger: ".product-container",
        start: "top+=300% center",
        onEnter: () => {
          gsap.set(fromBottom, { opacity: 0.2 });
          gsap.set("#leftCounter", { innerText: 0 });
          gsap.set("#rightCounter", { innerText: 0 });
          tl.restart();
        },
        onLeaveBack: () => {
          tl.pause(0);
          gsap.set(fromBottom, { opacity: 0.2 });
          gsap.set("#leftCounter", { innerText: 0 });
          gsap.set("#rightCounter", { innerText: 0 });
        }
      });

      // Scroll snap
      (function(){
        const SCROLL_DELAY = 700;
        let isAnimating = false;
        let vh = window.innerHeight;
        let currentIndex = Math.round(window.scrollY / vh);

        function maxIndex() {
          return Math.max(0, Math.floor((document.documentElement.scrollHeight - 1) / vh));
        }
        function clamp(i){ return Math.min(Math.max(i, 0), maxIndex()); }

        function snapTo(index) {
          index = clamp(index);
          currentIndex = index;
          isAnimating = true;
          window.scrollTo({ top: index * vh, behavior: 'smooth' });
          setTimeout(() => { isAnimating = false; }, SCROLL_DELAY);
        }

        window.addEventListener('resize', () => {
          vh = window.innerHeight;
          snapTo(currentIndex);
        });

        window.addEventListener('wheel', (e) => {
          if (isAnimating) { e.preventDefault(); return; }
          e.preventDefault();
          if (e.deltaY > 0) snapTo(currentIndex + 1);
          else if (e.deltaY < 0) snapTo(currentIndex - 1);
        }, { passive: false });

        let touchStartY = 0;
        window.addEventListener('touchstart', (e) => {
          touchStartY = e.touches[0].clientY;
        }, { passive: true });

        window.addEventListener('touchend', (e) => {
          if (isAnimating) return;
          const dy = touchStartY - e.changedTouches[0].clientY;
          if (Math.abs(dy) < 40) return;
          if (dy > 0) snapTo(currentIndex + 1);
          else snapTo(currentIndex - 1);
        }, { passive: true });

        window.addEventListener('keydown', (e) => {
          if (isAnimating) { e.preventDefault(); return; }
          if (e.code === 'ArrowDown' || e.code === 'PageDown') { e.preventDefault(); snapTo(currentIndex + 1); }
          if (e.code === 'ArrowUp' || e.code === 'PageUp')   { e.preventDefault(); snapTo(currentIndex - 1); }
          if (e.code === 'Home') { e.preventDefault(); snapTo(0); }
          if (e.code === 'End')  { e.preventDefault(); snapTo(maxIndex()); }
        });

        window.addEventListener('load', () => {
          vh = window.innerHeight;
          currentIndex = Math.round(window.scrollY / vh);
          snapTo(currentIndex);
        });
      })();
    }
  </script>
</body>
</html>
